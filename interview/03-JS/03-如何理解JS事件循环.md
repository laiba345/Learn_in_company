# 对JS事件循环是如何理解的？
- JS的事件循环（Event Loop）是其实现异步编程的核心机制，其管理着JS执行的顺序。决定了同步任务与异步任务的执行方式；
- JS事件循环
    - JS执行模型
        - JS是单线程的（同一时间只能执行一个任务）
        - 任务分类
            - 同步任务：立即执行，放入主线程（调用栈）中
            - 异步任务：不会阻塞主线程，在条件满足后将回调推入任务队列等待执行。
    - 事件循环的主要过程（分为同步任务和异步任务）
        - 同步任务
            - 同步代码按顺序执行，所有同步任务会依次进入主线程的调用栈中执行
            - 调用栈执行完成后清空
        - 异步任务
            - 异步任务（setTimeout、Promise、fetch等）会将回调函数推送到任务队列当中
            - 主线程空闲时（调用栈清空后），事件循环会从任务队列中取出任务，放到主线程中执行
    - 任务队列分类
        - 任务队列分为 宏任务 和 微任务
            - 宏任务（是大的任务，但是优先级更低），常见的有
                - setTimeout
                - setInterval
                - setImmediate（Node.js）
                - I/O操作
                - UI rendering（浏览器）
            - 微任务（小任务，但是优先级更高），常见的有
                - Promise.then/catch/finally
                - MutationObserver（DOM 变化观察）
                - queueMicrotask
    - **执行优先级**
        - 每次事件循环，都会先清空当前微任务队列，然后再执行宏任务
        - 微任务优先级高于宏任务
    - 事件循环的运行顺序
        - 1. 执行主线程中的同步任务（调用栈）
        - 2. 调用栈为空时，从微任务队列中取出任务执行，直到清空所有微任务；
        - 3. 执行宏任务队列中的第一个任务（如setTimeout） 
        - 4. 重复上述过程
    - 代码示例(见02-testShijianXunhuan.js)      

# 常见问答
1. 微任务和宏任务的优先级是什么？
- 微任务的优先级更高，当前事件循环中会优先执行所有的微任务，再进入下一个宏任务
2. Promise 和 setTimeout 的执行顺序？
- Promise 属于 微任务，会先执行， setTimeout 属于 宏任务，稍后执行。
3. 如何强制改变任务优先级？
- 使用 queueMicrotask 将宏任务转换为微任务。
- 使用setTimeout将微任务降级为宏任务
4. 如何优化事件循环中的任务性能？
- 减少不必要的微任务，避免任务队列堆积
- 使用async/await管理异步任务，提高代码可读性；
